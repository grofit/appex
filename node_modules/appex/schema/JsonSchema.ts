
/// <reference path="../modules/Reflection.ts" />
/// <reference path="JsonSchemaNode.ts" />
/// <reference path="JsonSchemaGenerator.ts" />
/// <reference path="JsonSchemaValidatorError.ts" />
/// <reference path="JsonSchemaValidator.ts" />

module appex.schema {

	export class JsonSchema {

		constructor(public reflection:appex.modules.Reflection) {
		}

        public get(qualifier:string) : appex.schema.JsonSchemaNode {
        
            var generator = new appex.schema.JsonSchemaGenerator(this.reflection);

            return generator.get(qualifier);
        }

        public validate(qualifier:string, object:any) : appex.schema.JsonSchemaValidatorError[] {
         
            var generator = new appex.schema.JsonSchemaGenerator(this.reflection);

            var schema = generator.get(qualifier);

            if(schema) {
            
                var validator = new appex.schema.JsonSchemaValidator();

                return validator.validate(object, schema);
            }

            return null;
        }
	}
}