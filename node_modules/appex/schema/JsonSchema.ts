
/// <reference path="../modules/Reflection.ts" />
/// <reference path="JsonSchemaNode.ts" />
/// <reference path="JsonSchemaGenerator.ts" />
/// <reference path="JsonSchemaValidatorError.ts" />
/// <reference path="JsonSchemaValidator.ts" />

module appex.schema {

	export class JsonSchema {
	
		private generator : appex.schema.JsonSchemaGenerator;

		private validator : appex.schema.JsonSchemaValidator;

		constructor(reflection:appex.modules.Reflection) {
		
			this.generator = new appex.schema.JsonSchemaGenerator(reflection);

			this.validator = new appex.schema.JsonSchemaValidator();
		}

        public get(qualifier:string) : appex.schema.JsonSchemaNode {
        
            return this.generator.get(qualifier);
        }

        public validate(qualifier:string, object:any) : appex.schema.JsonSchemaValidatorError[] {
         
            var schema = this.generator.get(qualifier);

            if(schema) {
            
                return this.validator.validate(object, schema);
            }

            return null;
        }
	}
}